{% extends 'base.html.twig' %}

{% block title %}Hello VisualisationController!{% endblock %}

{% block body %}
<div class="w-100">
    
    {{ render_chart(chart, {'class': 'my-chart'}) }}
</div>

<div class="row w-100">
    <div class="col">
        <div id="chart-pie" style="width: 100%; height: 400px;"></div>
    </div>
</div>
<div class="col">
    
    <div id="chart-bar" style="width: 100%; height: 400px;"></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/echarts@5.4.2/dist/echarts.min.js"></script>
<script src="{{asset('echartPie.js')}}"></script>
<script src="{{asset('echartBar.js')}}"></script>
<script>
    // Pass list of number to js
    // let data = $.parseJSON('{{data | json_encode |raw }}')

    // console.log(data)

    // let d = '{{data | json_encode }}'
    // console.log(d);

    // let dataPie = JSON.parse('{{ dataPie|json_encode|e("js") }}')
    // console.log(dataPie)

    //Convert list of string
    // let labels = JSON.parse('{{ labels|json_encode|e("js") }}');
    // Initialize ECharts
    const chartContainer = document.getElementById('chart-container');
   
    // let dataPie = {{dataPie |raw}}
    // let data = {{data |raw}}
    // let labels = {{labels |raw}}
    const containerPie = document.getElementById('chart-pie');
    const chartPie = echarts.init(containerPie)
    const optionPie = echartPie({{ dataPie | raw }}, "Classification")
    chartPie.setOption(optionPie);

    const containerBar = document.getElementById('chart-bar');
    const chartBar = echarts.init(containerBar)
    const optionBar = echartBar({{ labels | raw }}, {{ dataPie | raw }})
    chartBar.setOption(optionBar);
</script>
{% endblock %}
